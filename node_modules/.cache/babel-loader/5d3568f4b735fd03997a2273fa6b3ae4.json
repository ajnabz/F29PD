{"ast":null,"code":"import _classCallCheck from\"/Users/abbieprescott/Documents/GitHub/F29PD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abbieprescott/Documents/GitHub/F29PD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/abbieprescott/Documents/GitHub/F29PD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/abbieprescott/Documents/GitHub/F29PD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/abbieprescott/Documents/GitHub/F29PD/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import'../index.css';import{withCookies}from'react-cookie';import okologo from'../images/okologotext.png';import LoginConfirmation from'./loginConfirmation';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={credentials:{username:'',password:'',collapseID:'',logged_in:true,usernameMap:LoginConfirmation.usernameChecked,passwordMap:LoginConfirmation.passwordChecked},isLoginView:true,userAccount:[]};_this.toggleCollapse=function(collapseID){return function(){_this.setState(function(prevState){return{collapseID:prevState.collapseID!==collapseID?collapseID:''};});};};_this.inputChanged=function(event){var cred=_this.state.credentials;cred[event.target.name]=event.target.value;_this.setState({credentials:cred});};_this.login=function(event){if(_this.state.isLoginView){var cred=_this.state.credentials;console.log(cred);if(cred.username===cred.usernameMap&&cred.password===cred.passwordMap){window.location.href='/Oko';}else{alert(\"Login failed, please re-enter your details\");}}};_this.toggleView=function(){_this.setState({isLoginView:!_this.state.isLoginView});};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"http://oko-api.herokuapp.com/account/users/\",{method:'GET',headers:{//'Authorization': 'Token 53aaf969d1e6ee660f11a9cb99da97338232d86e'\n}}).then(function(resp){return resp.json();}).then(function(resp){return _this2.setState({userAccount:resp});}).catch(function(error){return console.log(error);});}},{key:\"render\",value:function render(){var collapseID=this.state.collapseID;return React.createElement(React.Fragment,null,React.createElement(\"img\",{src:require('../images/background4.jpeg'),style:{width:'100%',position:'absolute'},className:\"login_img1\"}),React.createElement(\"img\",{src:require('../images/background4.jpeg'),className:\"login_img2\"}),React.createElement(\"div\",{class:\"centered\"},React.createElement(\"a\",{href:\"https://flonne.me/\",className:\"f_button\",target:\"_tab\"},React.createElement(\"img\",{className:\"logo\",src:okologo,alt:\"logo\"})),React.createElement(\"div\",{className:\"login-container\",style:{paddingBottom:'0px',marginBottom:'0',marginLeft:'0'}},React.createElement(\"h1\",{className:\"login\"},this.state.isLoginView?'Login':'Register')),React.createElement(\"br\",null),React.createElement(\"div\",null,this.state.isLoginView?React.createElement(React.Fragment,null,React.createElement(\"span\",{className:\"login-fill\"},\"Username\"),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"text\",name:\"username\",value:this.state.credentials.username,onChange:this.inputChanged}),React.createElement(\"br\",null),React.createElement(\"span\",{className:\"login-fill\"},\"Password\"),React.createElement(\"br\",null),React.createElement(\"input\",{type:\"password\",name:\"password\",value:this.state.credentials.password,onChange:this.inputChanged}),React.createElement(LoginConfirmation,{userAccount:this.state.userAccount,cred:this.state.credentials,inputChanged:this.state.inputChanged,username:this.state.credentials.username})):React.createElement(React.Fragment,null,React.createElement(\"div\",null,React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"h3\",null,\"Do you have a home account?\"),React.createElement(\"br\",null),React.createElement(\"table\",{style:{width:'100%'}},React.createElement(\"tr\",null,React.createElement(\"td\",{style:{width:'50%'}},React.createElement(\"a\",{href:\"/Oko/EnterCode\"},React.createElement(\"button\",{className:\"dwellCode_button\",style:{marginBottom:'5em'}},\"Yes\"))),React.createElement(\"td\",{style:{width:'50%'}},React.createElement(\"a\",{href:\"/Oko/RegisterDwelling\"},React.createElement(\"button\",{className:\"dwellCode_button\",style:{marginBottom:'5em'}},\"No\"))))),React.createElement(\"br\",null)))),React.createElement(\"button\",{onClick:this.login,className:\"login_button\"},this.state.isLoginView?'Login':'Register'),React.createElement(\"p\",{onClick:this.toggleView},this.state.isLoginView?React.createElement(React.Fragment,null,React.createElement(\"br\",null),React.createElement(\"button\",{className:\"dwellCode_button\"},\"Create Account\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"a\",{href:\"/Oko/ForgottenPassword\",style:{color:'#38687E'}},\"Forgot Password?\")):React.createElement(\"a\",null,\"Back to Login\"))));}}]);return Login;}(Component);export default withCookies(Login);","map":{"version":3,"sources":["/Users/abbieprescott/Documents/GitHub/F29PD/src/components/login.js"],"names":["React","Component","withCookies","okologo","LoginConfirmation","Login","state","credentials","username","password","collapseID","logged_in","usernameMap","usernameChecked","passwordMap","passwordChecked","isLoginView","userAccount","toggleCollapse","setState","prevState","inputChanged","event","cred","target","name","value","login","console","log","window","location","href","alert","toggleView","fetch","method","headers","then","resp","json","catch","error","require","width","position","paddingBottom","marginBottom","marginLeft","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../index.css';\nimport { withCookies } from 'react-cookie';\nimport okologo from '../images/okologotext.png';\nimport LoginConfirmation from './loginConfirmation';\n\nclass Login extends Component {\n\n    state = {\n        credentials: {\n            username: '',\n            password: '',\n            collapseID: '',\n            logged_in: true,\n            usernameMap: LoginConfirmation.usernameChecked,\n            passwordMap: LoginConfirmation.passwordChecked\n        },\n        isLoginView: true,\n        userAccount: []\n    }\n\n    toggleCollapse = collapseID => () => {\n        this.setState(prevState => ({\n            collapseID: prevState.collapseID !== collapseID ? collapseID : ''\n        }));\n    };\n\n\n    inputChanged = event => {\n        let cred = this.state.credentials;\n        cred[event.target.name] = event.target.value;\n        this.setState({ credentials: cred });\n    }\n\n\n    login = event => {\n        if (this.state.isLoginView) {\n            let cred = this.state.credentials;\n            console.log(cred);\n            if((cred.username === cred.usernameMap) && (cred.password === cred.passwordMap)){\n                window.location.href = '/Oko';\n            } else {\n                alert(\"Login failed, please re-enter your details\");\n            }\n        }   \n    }\n\n    componentDidMount() {\n        fetch(`http://oko-api.herokuapp.com/account/users/`, {\n            method: 'GET',\n            headers: {\n                //'Authorization': 'Token 53aaf969d1e6ee660f11a9cb99da97338232d86e'\n            }\n        }).then(resp => resp.json())\n            .then(resp => this.setState({ userAccount: resp }))\n            .catch(error => console.log(error))\n    }\n\n\n    toggleView = () => {\n        this.setState({ isLoginView: !this.state.isLoginView });\n    }\n\n    render() {\n        const { collapseID } = this.state;\n\n        return (\n            <React.Fragment>\n\n                <img src={require('../images/background4.jpeg')} style={{ width: '100%', position: 'absolute' }} className=\"login_img1\"></img>\n                <img src={require('../images/background4.jpeg')} className=\"login_img2\"></img>\n                \n                <div class=\"centered\">\n\n                    <a href=\"https://flonne.me/\" className=\"f_button\" target='_tab'><img className=\"logo\" src={okologo} alt=\"logo\"></img></a>\n                    <div className=\"login-container\" style={{ paddingBottom: '0px', marginBottom: '0', marginLeft: '0' }}>\n\n                        <h1 className=\"login\">\n                            {this.state.isLoginView ? 'Login' : 'Register'}\n                        </h1>\n                    </div>\n                    <br />\n\n                    <div>\n                        {this.state.isLoginView ?\n\n                            <React.Fragment>\n                                <span className=\"login-fill\">Username</span><br />\n                                <input type=\"text\" name=\"username\" value={this.state.credentials.username}\n                                    onChange={this.inputChanged} /><br />\n                                <span className=\"login-fill\">Password</span><br />\n                                <input type=\"password\" name=\"password\" value={this.state.credentials.password}\n                                    onChange={this.inputChanged} />\n                                <LoginConfirmation userAccount={this.state.userAccount} cred={this.state.credentials} inputChanged={this.state.inputChanged} username={this.state.credentials.username}></LoginConfirmation>\n                            </React.Fragment>\n                            :\n                            <React.Fragment>\n                                <div>\n                                    <br></br>\n                                    <br></br>\n                                    <h3>Do you have a home account?</h3>\n                                    <br></br>\n                                    <table style={{ width: '100%' }}>\n                                        <tr>\n                                            <td style={{ width: '50%' }}>\n                                                <a href=\"/Oko/EnterCode\"><button className=\"dwellCode_button\" style={{ marginBottom: '5em' }}>Yes</button></a>\n                                            </td>\n                                            <td style={{ width: '50%' }}>\n                                                <a href='/Oko/RegisterDwelling'><button className=\"dwellCode_button\" style={{ marginBottom: '5em' }}>No</button></a>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <br></br>\n                                </div>\n                            </React.Fragment>\n                        }\n                    </div>\n\n\n                    <button onClick={this.login} className=\"login_button\">\n                        {this.state.isLoginView ? 'Login' : 'Register'}\n                    </button>\n                    <p onClick={this.toggleView}>\n                        {this.state.isLoginView ?\n                            <React.Fragment>\n                                <br></br>\n                                <button className='dwellCode_button'>Create Account</button>\n                                <br></br><br></br>\n                                <a href=\"/Oko/ForgottenPassword\" style={{ color: '#38687E' }}>Forgot Password?</a>\n                            </React.Fragment>\n                            : <a>Back to Login</a>}\n                    </p>\n                </div >\n\n            </React.Fragment>\n\n        );\n    }\n}\n\nexport default withCookies(Login);\n"]},"metadata":{},"sourceType":"module"}