{"ast":null,"code":"var _jsxFileName = \"/Users/abbieprescott/Documents/GitHub/F29PD/src/components/login.js\";\nimport React, { Component } from 'react';\nimport '../index.css';\nimport { withCookies } from 'react-cookie';\nimport okologo from '../images/okologotext.png';\nimport LoginConfirmation from './loginConfirmation';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      credentials: {\n        username: '',\n        password: '',\n        collapseID: '',\n        logged_in: true,\n        usernameMap: '',\n        passwordMap: ''\n      },\n      isLoginView: true\n    };\n\n    this.toggleCollapse = collapseID => () => {\n      this.setState(prevState => ({\n        collapseID: prevState.collapseID !== collapseID ? collapseID : ''\n      }));\n    };\n\n    this.inputChanged = event => {\n      let cred = this.state.credentials;\n      cred[event.target.name] = event.target.value;\n      this.setState({\n        credentials: cred\n      });\n    };\n\n    this.login = event => {\n      if (this.state.isLoginView) {\n        console.log(this.state.credentials);\n        fetch(`https://oko-api.herokuapp.com/account/users/${this.state.credentials.username}`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(this.state.credentials)\n        }).then(res => {\n          if (res.ok) {\n            console.log(res.token);\n            this.props.cookies.set('token', res.token);\n            window.location.href = '/Oko';\n          } else {\n            alert(\"Login failed, please re-enter your details\");\n            window.location.href = '/';\n          }\n        }).catch(error => console.log(error));\n      }\n    };\n\n    this.toggleView = () => {\n      this.setState({\n        isLoginView: !this.state.isLoginView\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://oko-api.herokuapp.com/account/users/${this.state.credentials.username}`, {\n      method: 'GET',\n      headers: {//'Authorization': 'Token 53aaf969d1e6ee660f11a9cb99da97338232d86e'\n      }\n    }).then(resp => resp.json()).then(resp => this.setState({\n      userAccount: resp\n    })).catch(error => console.log(error));\n  }\n\n  render() {\n    const {\n      collapseID\n    } = this.state;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: require('../images/background4.jpeg'),\n      style: {\n        width: '100%',\n        position: 'absolute'\n      },\n      className: \"login_img1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: require('../images/background4.jpeg'),\n      className: \"login_img2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"centered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"https://flonne.me/\",\n      className: \"f_button\",\n      target: \"_tab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"logo\",\n      src: okologo,\n      alt: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"login-container\",\n      style: {\n        paddingBottom: '0px',\n        marginBottom: '0',\n        marginLeft: '0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, this.state.isLoginView ? 'Login' : 'Register')), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.state.isLoginView ? React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"login-fill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      value: this.state.credentials.username,\n      onChange: this.inputChanged,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"login-fill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: this.state.credentials.password,\n      onChange: this.inputChanged,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(LoginConfirmation, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })) : React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Do you have a home account?\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(\"table\", {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      style: {\n        width: '50%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/Oko/EnterCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"dwellCode_button\",\n      style: {\n        marginBottom: '5em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Yes\"))), React.createElement(\"td\", {\n      style: {\n        width: '50%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/Oko/RegisterDwelling\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"dwellCode_button\",\n      style: {\n        marginBottom: '5em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"No\"))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })))), React.createElement(\"button\", {\n      onClick: this.login,\n      className: \"login_button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.state.isLoginView ? 'Login' : 'Register'), React.createElement(\"p\", {\n      onClick: this.toggleView,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.state.isLoginView ? React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"dwellCode_button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Create Account\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      href: \"/Oko/ForgottenPassword\",\n      style: {\n        color: '#38687E'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Forgot Password?\")) : React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Back to Login\"))));\n  }\n\n}\n\nexport default withCookies(Login);","map":{"version":3,"sources":["/Users/abbieprescott/Documents/GitHub/F29PD/src/components/login.js"],"names":["React","Component","withCookies","okologo","LoginConfirmation","Login","state","credentials","username","password","collapseID","logged_in","usernameMap","passwordMap","isLoginView","toggleCollapse","setState","prevState","inputChanged","event","cred","target","name","value","login","console","log","fetch","method","headers","body","JSON","stringify","then","res","ok","token","props","cookies","set","window","location","href","alert","catch","error","toggleView","componentDidMount","resp","json","userAccount","render","require","width","position","paddingBottom","marginBottom","marginLeft","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../index.css';\nimport { withCookies } from 'react-cookie';\nimport okologo from '../images/okologotext.png';\nimport LoginConfirmation from './loginConfirmation';\n\nclass Login extends Component {\n\n    state = {\n        credentials: {\n            username: '',\n            password: '',\n            collapseID: '',\n            logged_in: true,\n            usernameMap: '',\n            passwordMap: ''\n        },\n        isLoginView: true\n    }\n\n    toggleCollapse = collapseID => () => {\n        this.setState(prevState => ({\n            collapseID: prevState.collapseID !== collapseID ? collapseID : ''\n        }));\n    };\n\n\n    inputChanged = event => {\n        let cred = this.state.credentials;\n        cred[event.target.name] = event.target.value;\n        this.setState({ credentials: cred });\n    }\n\n\n    login = event => {\n        if (this.state.isLoginView) {\n            console.log(this.state.credentials);\n            fetch(`https://oko-api.herokuapp.com/account/users/${this.state.credentials.username}`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(this.state.credentials)\n            }).then(res => {\n                if (res.ok) {\n                    console.log(res.token);\n                    this.props.cookies.set('token', res.token);\n                    window.location.href = '/Oko'\n                } else {\n                    alert(\"Login failed, please re-enter your details\")\n                    window.location.href = '/'\n                }\n            })\n                .catch(error => console.log(error))\n        }\n    }\n\n    componentDidMount() {\n        fetch(`http://oko-api.herokuapp.com/account/users/${this.state.credentials.username}`, {\n            method: 'GET',\n            headers: {\n                //'Authorization': 'Token 53aaf969d1e6ee660f11a9cb99da97338232d86e'\n            }\n        }).then(resp => resp.json())\n            .then(resp => this.setState({ userAccount: resp }))\n            .catch(error => console.log(error))\n    }\n\n\n    toggleView = () => {\n        this.setState({ isLoginView: !this.state.isLoginView });\n    }\n\n    render() {\n        const { collapseID } = this.state;\n\n        return (\n            <React.Fragment>\n                <img src={require('../images/background4.jpeg')} style={{ width: '100%', position: 'absolute' }} className=\"login_img1\"></img>\n                <img src={require('../images/background4.jpeg')} className=\"login_img2\"></img>\n\n                <div class=\"centered\">\n\n                    <a href=\"https://flonne.me/\" className=\"f_button\" target='_tab'><img className=\"logo\" src={okologo} alt=\"logo\"></img></a>\n                    <div className=\"login-container\" style={{ paddingBottom: '0px', marginBottom: '0', marginLeft: '0' }}>\n\n                        <h1 className=\"login\">\n                            {this.state.isLoginView ? 'Login' : 'Register'}\n                        </h1>\n                    </div>\n                    <br />\n\n                    <div>\n                        {this.state.isLoginView ?\n\n                            <React.Fragment>\n                                <span className=\"login-fill\">Username</span><br />\n                                <input type=\"text\" name=\"username\" value={this.state.credentials.username}\n                                    onChange={this.inputChanged} /><br />\n                                <span className=\"login-fill\">Password</span><br />\n                                <input type=\"password\" name=\"password\" value={this.state.credentials.password}\n                                    onChange={this.inputChanged} />\n                                <LoginConfirmation></LoginConfirmation>\n                            </React.Fragment>\n                            :\n                            <React.Fragment>\n                                <div>\n                                    <br></br>\n                                    <br></br>\n                                    <h3>Do you have a home account?</h3>\n                                    <br></br>\n                                    <table style={{ width: '100%' }}>\n                                        <tr>\n                                            <td style={{ width: '50%' }}>\n                                                <a href=\"/Oko/EnterCode\"><button className=\"dwellCode_button\" style={{ marginBottom: '5em' }}>Yes</button></a>\n                                            </td>\n                                            <td style={{ width: '50%' }}>\n                                                <a href='/Oko/RegisterDwelling'><button className=\"dwellCode_button\" style={{ marginBottom: '5em' }}>No</button></a>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                    <br></br>\n                                </div>\n                            </React.Fragment>\n                        }\n                    </div>\n\n\n                    <button onClick={this.login} className=\"login_button\">\n                        {this.state.isLoginView ? 'Login' : 'Register'}\n                    </button>\n                    <p onClick={this.toggleView}>\n                        {this.state.isLoginView ?\n                            <React.Fragment>\n                                <br></br>\n                                <button className='dwellCode_button'>Create Account</button>\n                                <br></br><br></br>\n                                <a href=\"/Oko/ForgottenPassword\" style={{ color: '#38687E' }}>Forgot Password?</a>\n                            </React.Fragment>\n                            : <a>Back to Login</a>}\n                    </p>\n                </div >\n\n            </React.Fragment>\n\n        );\n    }\n}\n\nexport default withCookies(Login);\n"]},"metadata":{},"sourceType":"module"}